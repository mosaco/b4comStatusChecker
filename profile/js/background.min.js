function updateBadge(){for(var e,t=JSON.parse(lc.getItem("data")),n=lc.getItem("badgeType"),a=0,r=t.length;r>a;a++)if(t[a].name===n){e=t[a].value;break}chrome.browserAction.setBadgeBackgroundColor({color:"#fe6000"}),chrome.browserAction.setBadgeText({text:e.split(",").join("")})}function updateStatus(e){if("offline"!==e){for(var t=JSON.parse(lc.getItem("data")),n=JSON.parse(lc.getItem("data")),a=e.querySelectorAll("#countBlock h2"),r=e.querySelectorAll(".countNumber"),u=e.querySelectorAll(".countValue"),o=0,i=t.length;i>o;o++)n[o].title=a[o].innerText,n[o].value=r[o].innerText,n[o].unit=u[o].innerText;lc.setItem("data",JSON.stringify(n))}updateBadge()}function requestURL(e,t,n){var a=new XMLHttpRequest;a.responseType=n||"document",a.onreadystatechange=function(){4===a.readyState&&(200===a.status?t("document"===a.responseType?a.responseXML:a.responseText):t("offline"))},a.onerror=function(){t("offline")},a.open("GET",e,!0),a.send()}function requestStatus(){requestURL(statusURL,updateStatus,"document"),timerID&&clearTimeout(timerID),timerID=setTimeout(requestStatus,lc.getItem("timerMs"))}function init(){$.extend(lc,defaultProps),$(window).on("storage",requestStatus),requestStatus()}var lc=localStorage,statusURL="http://www.bengo4.com",timerID,defaultProps={badgeType:"resPercent",timerMs:2e5,data:'[{"name":"lawyerNum","title":"登録弁護士数","value":"--","unit":"人"},{"name":"allAdvice","title":"相談件数（累計）","value":"--","unit":"件"},{"name":"d30Advice","title":"相談件数（月間）","value":"--","unit":"件"},{"name":"resPercent","title":"弁護士回答率","value":"--","unit":"%"},{"name":"reviewNum","title":"口コミ評価数","value":"--","unit":"件"}]'};$(function(e){init(e)});